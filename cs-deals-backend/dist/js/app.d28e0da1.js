(function(){"use strict";var e={1387:function(e,t,i){var o=i(5130),l=i(6768);function n(e,t){const i=(0,l.g2)("router-link"),o=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("nav",null,[(0,l.bF)(i,{to:"/"},{default:(0,l.k6)((()=>t[0]||(t[0]=[(0,l.eW)("CSDeals")]))),_:1})]),(0,l.bF)(o)],64)}var r=i(1241);const a={},s=(0,r.A)(a,[["render",n]]);var c=s,u=i(3768),p=i(4232);const d={class:"main"},h={class:"controls"},m={class:"form-group"},v={key:0,class:"form-group"},f={class:"form-group"},b={class:"form-group"},k={class:"form-group"},g={class:"form-group checkbox-group"},y={class:"form-group"},F={class:"form-group"},L={class:"item-details"},w={style:{width:"20%"}},x={key:0},A=["onUpdate:modelValue","placeholder"],P={key:1},C=["onUpdate:modelValue","placeholder"],G=["onUpdate:modelValue"];function O(e,t,i,n,r,a){return(0,l.uX)(),(0,l.CE)("div",d,[(0,l.Lk)("div",h,[(0,l.Lk)("div",m,[(0,l.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.addFilter&&e.addFilter(...t)),class:"btn"},(0,p.v_)(e.showForm?"Сховати":"Додати фільтр"),1)]),e.showForm?((0,l.uX)(),(0,l.CE)("div",v,[(0,l.Lk)("div",null,[t[11]||(t[11]=(0,l.Lk)("label",null,"Назва предмету:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.newFilter.itemName=t),class:"input",placeholder:"Назва предмету"},null,512),[[o.Jo,e.newFilter.itemName]])]),(0,l.Lk)("div",null,[t[12]||(t[12]=(0,l.Lk)("label",null,"Максимальна ціна:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=t=>e.newFilter.maxPrice=t),class:"input",placeholder:"Максимальна ціна"},null,512),[[o.Jo,e.newFilter.maxPrice,void 0,{number:!0}]])]),(0,l.Lk)("div",null,[t[13]||(t[13]=(0,l.Lk)("label",null,"Кількість:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=t=>e.newFilter.amount=t),class:"input",placeholder:"Кількість"},null,512),[[o.Jo,e.newFilter.amount,void 0,{number:!0}]])]),(0,l.Lk)("div",f,[(0,l.Lk)("button",{onClick:t[4]||(t[4]=t=>e.saveFilter(e.newFilter,!0)),class:"btn"},"Зберегти фільтр")])])):(0,l.Q3)("",!0),(0,l.Lk)("div",b,[t[14]||(t[14]=(0,l.Lk)("label",{for:"minPriceGrey"},"Мінімальна ціна:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=t=>e.minPriceGrey=t),id:"minPriceGrey",class:"input",placeholder:"Введіть мінімальну ціну"},null,512),[[o.Jo,e.minPriceGrey,void 0,{number:!0}]])]),(0,l.Lk)("div",k,[t[15]||(t[15]=(0,l.Lk)("label",{for:"minDiscountGrey"},"Мінімальна знижка:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=t=>e.minDiscountGrey=t),id:"minDiscountGrey",class:"input",placeholder:"Введіть мінімальну знижку"},null,512),[[o.Jo,e.minDiscountGrey,void 0,{number:!0}]])]),(0,l.Lk)("div",g,[t[16]||(t[16]=(0,l.Lk)("label",{for:"checkboxWhite"},"Почати покупки Білого списку",-1)),(0,l.bo)((0,l.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=t=>e.checkboxWhite=t),id:"checkboxWhite",class:"checkbox"},null,512),[[o.lH,e.checkboxWhite]]),t[17]||(t[17]=(0,l.Lk)("label",{for:"checkboxGrey"},"Почати покупки Сірого списку",-1)),(0,l.bo)((0,l.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=t=>e.checkboxGrey=t),id:"checkboxGrey",class:"checkbox"},null,512),[[o.lH,e.checkboxGrey]])]),(0,l.Lk)("div",y,[(0,l.Lk)("button",{onClick:t[9]||(t[9]=(...t)=>e.toggleShopping&&e.toggleShopping(...t)),class:"btn"},(0,p.v_)(e.shoppingActive?"Закінчити покупки":"Почати покупки"),1)]),(0,l.Lk)("div",F,[(0,l.Lk)("button",{onClick:t[10]||(t[10]=(...t)=>e.saveFilters&&e.saveFilters(...t)),class:"btn"}," Зберегти фільтри ")])]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.filters.sort(((e,t)=>t.active-e.active)),((e,i)=>((0,l.uX)(),(0,l.CE)("div",{key:i,class:"item"},[(0,l.Lk)("div",L,[(0,l.Lk)("label",w,(0,p.v_)(e.itemName),1),e.active?((0,l.uX)(),(0,l.CE)("div",x,[t[18]||(t[18]=(0,l.Lk)("label",{for:"maxPrice"},"Максимальна ціна: ",-1)),(0,l.bo)((0,l.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.maxPrice=t,id:"maxPrice",placeholder:"Максимальна ціна для "+e.itemName},null,8,A),[[o.Jo,e.maxPrice,void 0,{number:!0}]])])):(0,l.Q3)("",!0),e.active?((0,l.uX)(),(0,l.CE)("div",P,[t[19]||(t[19]=(0,l.Lk)("label",{for:"amount"},"Кількість: ",-1)),(0,l.bo)((0,l.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.amount=t,id:"amount",placeholder:"Кількість для "+e.itemName},null,8,C),[[o.Jo,e.amount,void 0,{number:!0}]])])):(0,l.Q3)("",!0),(0,l.Lk)("div",null,[t[20]||(t[20]=(0,l.Lk)("label",{for:"active"},"Активний: ",-1)),(0,l.bo)((0,l.Lk)("input",{type:"checkbox","onUpdate:modelValue":t=>e.active=t,id:"active"},null,8,G),[[o.lH,e.active]])])])])))),128))])}var U=i(1114),E=(i(4114),i(9975)),V=i(4373);class N extends E.lD{constructor(...e){super(...e),(0,U.A)(this,"lootFarmItems",[]),(0,U.A)(this,"csDealsItems",[]),(0,U.A)(this,"filters",[]),(0,U.A)(this,"minPriceGrey",0),(0,U.A)(this,"minDiscountGrey",0),(0,U.A)(this,"checkboxWhite",!1),(0,U.A)(this,"checkboxGrey",!1),(0,U.A)(this,"shoppingActive",!1),(0,U.A)(this,"showForm",!1),(0,U.A)(this,"newFilter",{itemName:"",minPrice:0,maxPrice:0,minDiscount:0,active:!0,amount:0,userCreated:!0}),(0,U.A)(this,"activeFiltersInterval",0)}mounted(){this.getFilters()}async getFilters(){await V.A.get("http://localhost:3000/api/getFilters").then((e=>{this.filters=e.data}))}async toggleShopping(){if(this.shoppingActive=!this.shoppingActive,this.shoppingActive){const e=this.filters.filter((e=>e.active));await V.A.post("http://localhost:3000/api/toggleShoppingOn",{filters:e}),this.startPollingActiveFilters()}else await V.A.get("http://localhost:3000/api/toggleShoppingOff"),this.stopPollingActiveFilters()}addFilter(){this.showForm=!this.showForm}async saveFilter(e,t){const i=this.filters.find((t=>t.itemName===e.itemName));i?console.warn(`Фільтр з назвою "${e.itemName}" вже існує.`):(e.userCreated=!0,await V.A.post("http://localhost:3000/api/addUserFilter",{filter:e}),t&&(this.filters.push({...this.newFilter}),this.newFilter={itemName:"",minPrice:0,maxPrice:0,minDiscount:0,active:!0,amount:0,userCreated:!0},this.addFilter(),this.getFilters()))}async saveFilters(){try{const e=this.filters.filter((e=>e.active&&!e.userCreated));await V.A.post("http://localhost:3000/api/saveFilters",{filters:e}),console.log("Filters saved successfully")}catch(e){console.error("Error saving filters:",e)}}async startPollingActiveFilters(){this.activeFiltersInterval=setInterval((async()=>{try{const e=await V.A.get("http://localhost:3000/api/getServiceActiveFilters"),t=e.data;t.forEach((e=>{let t=this.filters.find((t=>t.itemName===e.itemName));t&&void 0!==e.amount&&(t.amount=e.amount)}))}catch(e){console.error("Error fetching filters:",e)}}),1e4)}stopPollingActiveFilters(){this.activeFiltersInterval&&(clearInterval(this.activeFiltersInterval),this.activeFiltersInterval=0)}}const S=(0,r.A)(N,[["render",O],["__scopeId","data-v-120dc415"]]);var _=S;const I=[{path:"/",name:"home",component:_}],D=(0,u.aE)({history:(0,u.Bt)(),routes:I});var j=D,J=i(782),X=(0,J.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,o.Ef)(c).use(X).use(j).mount("#app")}},t={};function i(o){var l=t[o];if(void 0!==l)return l.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,i),n.exports}i.m=e,function(){var e=[];i.O=function(t,o,l,n){if(!o){var r=1/0;for(u=0;u<e.length;u++){o=e[u][0],l=e[u][1],n=e[u][2];for(var a=!0,s=0;s<o.length;s++)(!1&n||r>=n)&&Object.keys(i.O).every((function(e){return i.O[e](o[s])}))?o.splice(s--,1):(a=!1,n<r&&(r=n));if(a){e.splice(u--,1);var c=l();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,l,n]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};i.O.j=function(t){return 0===e[t]};var t=function(t,o){var l,n,r=o[0],a=o[1],s=o[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(l in a)i.o(a,l)&&(i.m[l]=a[l]);if(s)var u=s(i)}for(t&&t(o);c<r.length;c++)n=r[c],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(u)},o=self["webpackChunkcs_deals"]=self["webpackChunkcs_deals"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=i.O(void 0,[504],(function(){return i(1387)}));o=i.O(o)})();
//# sourceMappingURL=app.d28e0da1.js.map